---
description: "Mission Alpha: Triple-Vessel Stealth Extraction Engine - Grand Strategy"
alwaysApply: true
globs:
  - "**/*"
---

# MISSION ALPHA: PROJECT CHIMERA INTEGRATION

## ğŸ¯ CORE MISSION

We are building a **Triple-Vessel Stealth Extraction Engine** that transforms the lead generation platform into a distributed, AI-driven extraction powerhouse. The system must be **mathematically and behaviorally indistinguishable from a human user**.

---

## ğŸ—ï¸ THE ARCHITECTURAL TRINITY

### 1. The General (Node.js/Next.js)
**Location:** `/brainscraper`  
**Technology:** Node.js, Next.js 14  
**Role:** Orchestrator  
**Responsibilities:**
- Manages 50+ API routes
- UI and lead enrichment logic
- Lead data aggregation and visualization
- Settings and configuration management

**Critical Rules:**
- âœ… **Zero Regression:** Never modify existing `/brainscraper` Node.js routes unless explicitly asked
- âœ… **Preserve Existing:** All 50+ API routes must remain functional
- âœ… **No Python/Rust Dependencies:** Keep Node.js silo pure

---

### 2. The Brain (Python 3.11)
**Location:** `/chimera-brain`  
**Technology:** Python 3.11, PyTorch, Vector DBs  
**Role:** Cortex (AI Service)  
**Responsibilities:**
- VLM (Vision Language Model) reasoning
- World Modeling
- Hive Mind vector memory
- AI-driven decision making

**Critical Rules:**
- âœ… **Python 3.11 Only:** Use Python 3.11, no other versions
- âœ… **Absolute Imports:** Use absolute imports from `src/`
- âœ… **PyTorch Ecosystem:** Leverage PyTorch for ML workloads
- âœ… **Isolated Service:** No Node.js or Rust dependencies

---

### 3. The Body (Rust)
**Location:** `/chimera-core`  
**Technology:** Rust  
**Role:** Worker Swarm (Digital Phantom)  
**Responsibilities:**
- 5/5 "Digital Phantom" stealth browser instances
- Behavioral jitter and diffusion-based mouse paths
- CreepJS validation (target: 100% Human trust score)
- Stealth browser mission execution

**Critical Rules:**
- âœ… **Stealth First:** All browser actions must use diffusion-based mouse paths
- âœ… **Behavioral Jitter:** Implement human-like timing variations
- âœ… **100% Human Score:** Target 100% Human trust score on CreepJS
- âœ… **Worker Swarm:** 5 parallel instances for high throughput

---

## ğŸ”— UNIFIED HANDSHAKE PROTOCOL

### gRPC Communication
**Contract:** `@proto/chimera.proto` (shared across all services)  
**Network:** Railway's private network  
**Protocol:** gRPC over secure channels

**Critical Rules:**
- âœ… **Contract-First:** All cross-language communication must follow `@proto/chimera.proto`
- âœ… **No Direct Imports:** Services communicate via gRPC, not code imports
- âœ… **Type Safety:** Use generated code from proto files
- âœ… **Private Network:** Use Railway's private network for service-to-service communication

---

## ğŸ¯ MISSION ALPHA OBJECTIVES

### Objective 1: Absolute Isolation
**Goal:** Physically separate Node.js, Python, and Rust into their own folders to prevent:
- IDE freezing
- Build collisions
- Dependency bloat
- Cross-language contamination

**Success Criteria:**
- âœ… Each service in its own directory (`/brainscraper`, `/chimera-brain`, `/chimera-core`)
- âœ… No shared dependencies between services
- âœ… Independent build processes
- âœ… Isolated runtime environments

---

### Objective 2: Stealth Validation
**Goal:** Rust worker swarm verifies 100% Human trust score on CreepJS

**Requirements:**
- Behavioral jitter (human-like timing)
- Diffusion-based mouse paths (mathematically natural movement)
- Browser fingerprint randomization
- Canvas/WebGL fingerprint masking

**Success Criteria:**
- âœ… CreepJS trust score = 100% Human
- âœ… All 5 worker instances pass validation
- âœ… Consistent performance across multiple runs

---

### Objective 3: Unified Handshake
**Goal:** Establish secure gRPC connection over Railway's private network

**Requirements:**
- Shared `@proto/chimera.proto` contract
- gRPC server/client in each service
- Type-safe communication
- Error handling and retry logic

**Success Criteria:**
- âœ… The General can communicate with The Brain via gRPC
- âœ… The Brain can communicate with The Body via gRPC
- âœ… All services use the same proto contract
- âœ… Communication works over Railway's private network

---

## ğŸš¨ CRITICAL PROTOCOLS

### Zero Regression Protocol
**Rule:** Never modify existing functionality unless explicitly requested

**Application:**
- `/brainscraper` routes must remain unchanged
- Existing enrichment pipeline must continue working
- Data protection rules still apply (see `data-protection.mdc`)
- Redis bridge integration must remain functional

---

### Stealth First Protocol
**Rule:** All browser automation must prioritize stealth over speed

**Application:**
- Use diffusion-based mouse paths (not linear)
- Implement behavioral jitter (random delays)
- Rotate user agents and fingerprints
- Respect rate limits and cooldowns

---

### Contract-First Protocol
**Rule:** All cross-service communication must use gRPC with shared proto contract

**Application:**
- Define interfaces in `@proto/chimera.proto`
- Generate client/server code from proto
- No direct HTTP calls between services
- Use Railway's private network for security

---

## ğŸ“ PROJECT STRUCTURE

```
my-lead-engine/
â”œâ”€â”€ brainscraper/          # The General (Node.js/Next.js)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/           # 50+ API routes (DO NOT MODIFY)
â”‚   â”‚   â””â”€â”€ components/    # UI components
â”‚   â””â”€â”€ utils/            # Node.js utilities
â”‚
â”œâ”€â”€ chimera-brain/         # The Brain (Python 3.11)
â”‚   â”œâ”€â”€ src/              # Python source code
â”‚   â”‚   â”œâ”€â”€ vlm/          # Vision Language Models
â”‚   â”‚   â”œâ”€â”€ world_model/  # World modeling
â”‚   â”‚   â””â”€â”€ hive_mind/    # Vector memory
â”‚   â””â”€â”€ requirements.txt  # Python dependencies
â”‚
â”œâ”€â”€ chimera-core/          # The Body (Rust)
â”‚   â”œâ”€â”€ src/              # Rust source code
â”‚   â”‚   â”œâ”€â”€ workers/     # 5/5 Digital Phantom instances
â”‚   â”‚   â”œâ”€â”€ stealth/      # Stealth browser logic
â”‚   â”‚   â””â”€â”€ validation/   # CreepJS validation
â”‚   â””â”€â”€ Cargo.toml        # Rust dependencies
â”‚
â”œâ”€â”€ scrapegoat/            # Existing Python service (preserve)
â”‚   â””â”€â”€ app/              # FastAPI enrichment pipeline
â”‚
â””â”€â”€ @proto/                # Shared gRPC contracts
    â””â”€â”€ chimera.proto      # Unified service contract
```

---

## âœ… SUCCESS CHECKLIST

Before considering Mission Alpha complete, verify:

- [ ] All three services are in isolated directories
- [ ] No cross-language dependencies
- [ ] gRPC proto contract defined and shared
- [ ] Rust workers achieve 100% Human CreepJS score
- [ ] The General can communicate with The Brain via gRPC
- [ ] The Brain can communicate with The Body via gRPC
- [ ] All existing `/brainscraper` routes remain functional
- [ ] Enrichment pipeline continues working
- [ ] Data protection rules are maintained
- [ ] Redis bridge integration is preserved

---

## ğŸ¯ REMEMBER

**This is a distributed system:** Services communicate via gRPC, not code imports.  
**Isolation is critical:** Each service must be independently deployable.  
**Stealth is non-negotiable:** Browser automation must be undetectable.  
**Zero regression:** Existing functionality must be preserved.
