---
description: "Mission Alpha: Triple-Vessel Stealth Extraction Engine - Grand Strategy"
alwaysApply: true
globs:
  - "**/*"
---

# MISSION ALPHA: PROJECT CHIMERA INTEGRATION

## ğŸ¯ CORE MISSION

**STATUS: âœ… COMPLETE** - The **Triple-Vessel Stealth Extraction Engine** is fully deployed and operational. The system transforms the lead generation platform into a distributed, AI-driven extraction powerhouse that is **mathematically and behaviorally indistinguishable from a human user**.

---

## âœ… DEPLOYMENT STATUS

**All services are online and operational:**
- âœ… The General (brainscraper) - Online on Railway, Port 3000
- âœ… The Brain (chimera-brain-v1) - Online on Railway, HTTP: 8080, gRPC: 50051
- âœ… The Body (chimera-core) - Online on Railway, connected to Brain via gRPC
- âœ… Scrapegoat - Online on Railway, Port 8000, enrichment pipeline active
- âœ… Infrastructure (Redis, PostgreSQL) - Online and accessible

**Start Script:** Use `./start-triple-vessel.sh` to start/verify all services (local or Railway).

---

## ğŸ—ï¸ THE ARCHITECTURAL TRINITY

### 1. The General (Node.js/Next.js)
**Location:** `/brainscraper`  
**Technology:** Node.js, Next.js 14  
**Role:** Orchestrator  
**Responsibilities:**
- Manages 50+ API routes
- UI and lead enrichment logic
- Lead data aggregation and visualization
- Settings and configuration management

**Critical Rules:**
- âœ… **Zero Regression:** Never modify existing `/brainscraper` Node.js routes unless explicitly asked
- âœ… **Preserve Existing:** All 50+ API routes must remain functional
- âœ… **No Python/Rust Dependencies:** Keep Node.js silo pure

---

### 2. The Brain (Python 3.11)
**Location:** `/chimera_brain` (note: underscore, not hyphen)  
**Technology:** Python 3.11, PyTorch, Vector DBs  
**Role:** Cortex (AI Service)  
**Status:** âœ… Deployed on Railway  
**Ports:** HTTP healthcheck: 8080, gRPC service: 50051  
**Responsibilities:**
- VLM (Vision Language Model) reasoning
- World Modeling
- Hive Mind vector memory (Redis Stack)
- AI-driven decision making

**Critical Rules:**
- âœ… **Python 3.11 Only:** Use Python 3.11, no other versions
- âœ… **Dual Port Setup:** HTTP on PORT (8080) for healthchecks, gRPC on CHIMERA_BRAIN_PORT (50051)
- âœ… **PyTorch Ecosystem:** Leverage PyTorch for ML workloads
- âœ… **Isolated Service:** No Node.js or Rust dependencies

---

### 3. The Body (Rust)
**Location:** `/chimera-core`  
**Technology:** Rust  
**Role:** Worker Swarm (Digital Phantom)  
**Responsibilities:**
- 5/5 "Digital Phantom" stealth browser instances
- Behavioral jitter and diffusion-based mouse paths
- CreepJS validation (target: 100% Human trust score)
- Stealth browser mission execution

**Critical Rules:**
- âœ… **Stealth First:** All browser actions must use diffusion-based mouse paths
- âœ… **Behavioral Jitter:** Implement human-like timing variations
- âœ… **100% Human Score:** Target 100% Human trust score on CreepJS
- âœ… **Worker Swarm:** 5 parallel instances for high throughput

---

## ğŸ”— UNIFIED HANDSHAKE PROTOCOL

### gRPC Communication
**Contract:** `@proto/chimera.proto` (shared across all services)  
**Network:** Railway's private network  
**Protocol:** gRPC over secure channels

**Critical Rules:**
- âœ… **Contract-First:** All cross-language communication must follow `@proto/chimera.proto`
- âœ… **No Direct Imports:** Services communicate via gRPC, not code imports
- âœ… **Type Safety:** Use generated code from proto files
- âœ… **Private Network:** Use Railway's private network for service-to-service communication

---

## ğŸ¯ MISSION ALPHA OBJECTIVES

### Objective 1: Absolute Isolation
**Goal:** Physically separate Node.js, Python, and Rust into their own folders to prevent:
- IDE freezing
- Build collisions
- Dependency bloat
- Cross-language contamination

**Success Criteria:**
- âœ… Each service in its own directory (`/brainscraper`, `/chimera_brain`, `/chimera-core`)
- âœ… No shared dependencies between services
- âœ… Independent build processes
- âœ… Isolated runtime environments
- âœ… All services deployed and operational on Railway

---

### Objective 2: Stealth Validation
**Goal:** Rust worker swarm verifies 100% Human trust score on CreepJS

**Requirements:**
- Behavioral jitter (human-like timing)
- Diffusion-based mouse paths (mathematically natural movement)
- Browser fingerprint randomization
- Canvas/WebGL fingerprint masking

**Success Criteria:**
- âœ… CreepJS trust score = 100% Human
- âœ… All 5 worker instances pass validation
- âœ… Consistent performance across multiple runs

---

### Objective 3: Unified Handshake
**Goal:** Establish secure gRPC connection over Railway's private network

**Requirements:**
- Shared `@proto/chimera.proto` contract
- gRPC server/client in each service
- Type-safe communication
- Error handling and retry logic

**Success Criteria:**
- âœ… The Brain can communicate with The Body via gRPC (verified)
- âœ… All services use the same proto contract (`@proto/chimera.proto`)
- âœ… Communication works over Railway's private network (`chimera-brain.railway.internal:50051`)
- âœ… gRPC server listening on port 50051, HTTP healthcheck on port 8080

---

## ğŸš¨ CRITICAL PROTOCOLS

### Zero Regression Protocol
**Rule:** Never modify existing functionality unless explicitly requested

**Application:**
- `/brainscraper` routes must remain unchanged
- Existing enrichment pipeline must continue working
- Data protection rules still apply (see `data-protection.mdc`)
- Redis bridge integration must remain functional

---

### Stealth First Protocol
**Rule:** All browser automation must prioritize stealth over speed

**Application:**
- Use diffusion-based mouse paths (not linear)
- Implement behavioral jitter (random delays)
- Rotate user agents and fingerprints
- Respect rate limits and cooldowns

---

### Contract-First Protocol
**Rule:** All cross-service communication must use gRPC with shared proto contract

**Application:**
- Define interfaces in `@proto/chimera.proto`
- Generate client/server code from proto
- No direct HTTP calls between services
- Use Railway's private network for security

---

## ğŸ“ PROJECT STRUCTURE

```
my-lead-engine/
â”œâ”€â”€ brainscraper/          # The General (Node.js/Next.js) âœ… Online
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/           # 50+ API routes (DO NOT MODIFY)
â”‚   â”‚   â””â”€â”€ components/    # UI components
â”‚   â””â”€â”€ utils/            # Node.js utilities
â”‚
â”œâ”€â”€ chimera_brain/         # The Brain (Python 3.11) âœ… Online
â”‚   â”œâ”€â”€ server.py         # gRPC server (port 50051)
â”‚   â”œâ”€â”€ vision_service.py # VLM processing
â”‚   â”œâ”€â”€ hive_mind.py      # Vector memory (Redis Stack)
â”‚   â”œâ”€â”€ world_model.py    # World modeling
â”‚   â”œâ”€â”€ proto/            # Generated proto files
â”‚   â””â”€â”€ requirements.txt  # Python dependencies
â”‚
â”œâ”€â”€ chimera-core/          # The Body (Rust) âœ… Online
â”‚   â”œâ”€â”€ src/              # Rust source code
â”‚   â”‚   â”œâ”€â”€ main.rs       # Entry point
â”‚   â”‚   â”œâ”€â”€ client.rs     # gRPC client
â”‚   â”‚   â””â”€â”€ stealth.rs   # Stealth browser logic
â”‚   â””â”€â”€ Cargo.toml        # Rust dependencies
â”‚
â”œâ”€â”€ scrapegoat/            # Enrichment Pipeline âœ… Online
â”‚   â”œâ”€â”€ main.py           # FastAPI service
â”‚   â””â”€â”€ start_redis_worker.py # Worker entry point
â”‚
â”œâ”€â”€ @proto/                # Shared gRPC contracts
â”‚   â””â”€â”€ chimera.proto      # Unified service contract
â”‚
â””â”€â”€ start-triple-vessel.sh # Unified start script â­
```

---

## âœ… SUCCESS CHECKLIST

**Mission Alpha Status: COMPLETE âœ…**

- [x] All three services are in isolated directories
- [x] No cross-language dependencies
- [x] gRPC proto contract defined and shared (`@proto/chimera.proto`)
- [x] The Brain can communicate with The Body via gRPC (verified)
- [x] All services deployed on Railway
- [x] Healthchecks passing for all services
- [x] All existing `/brainscraper` routes remain functional
- [x] Enrichment pipeline continues working
- [x] Data protection rules are maintained
- [x] Redis bridge integration is preserved
- [x] Unified start script created (`start-triple-vessel.sh`)
- [ ] Rust workers achieve 100% Human CreepJS score (ongoing optimization)

---

## ğŸ¯ REMEMBER

**This is a distributed system:** Services communicate via gRPC, not code imports.  
**Isolation is critical:** Each service must be independently deployable.  
**Stealth is non-negotiable:** Browser automation must be undetectable.  
**Zero regression:** Existing functionality must be preserved.

**See Also:**
- `.cursor/rules/500-system-operations.mdc` - How to start and monitor the system
- `.cursor/rules/600-component-relationships.mdc` - How components interact and decision trees
