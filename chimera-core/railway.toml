[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"
# Watch all files in chimera-core directory
watchPatterns = ["**"]

[deploy]
# Docker CMD handles startup (python main.py)
# Proto files are generated during Docker build
startCommand = "python main.py"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# People-search: REDIS_URL required (same as Scrapegoat; run ./scripts/railway-people-search-align.sh or set Variable Ref to Redis).
# Also in Dashboard: CAPSOLVER_API_KEY, DECODO_API_KEY (or PROXY_URL). CHIMERA_BRAIN_ADDRESS below.

[env]
PYTHONUNBUFFERED = "1"
RAILWAY_ENVIRONMENT = "production"
CHIMERA_BRAIN_ADDRESS = "http://chimera-brain.railway.internal:50051"
# Per-mission timeout; must match Scrapegoat CHIMERA_STATION_TIMEOUT so Core LPUSHes before Scrapegoat BRPOP gives up
MISSION_TIMEOUT_SEC = "90"
# Optional: set to BrainScraper HTTP URL (e.g. https://brainscraper.xxx.railway.app or http://brainscraper.railway.internal:3000) to push telemetry to /api/v2-pilot/telemetry for Neural Sight and Stealth panels
BRAINSCRAPER_URL = ""

[environments]
[environments.production]
ENVIRONMENT = "production"
NO_CACHE = "1"
